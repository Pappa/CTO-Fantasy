{"ast":null,"code":"import { Chapter } from \"./Chapter\";\nexport class LinearStory {\n  constructor(chapters = [], delay = 1000) {\n    this.story = [];\n\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n\n    this.delay = delay;\n    this.story = chapters;\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a Chapters\");\n    }\n\n    this.story.push(chapter);\n  }\n\n  play() {\n    if (this.story.length) {\n      const chapter = this.story.shift();\n      chapter.start(chapter.data, result => {\n        chapter.complete(result);\n        console.log(\"clapter\", Object.keys(chapter));\n        setTimeout(() => {\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return true; //return chapters.every((chapter) => chapter instanceof Chapter);\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/classes/LinearStory.js"],"names":["Chapter","LinearStory","constructor","chapters","delay","story","isValid","Error","add","chapter","push","play","length","shift","start","data","result","complete","console","log","Object","keys","setTimeout"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,WAAN,CAAkB;AAEvBC,EAAAA,WAAW,CAACC,QAAQ,GAAG,EAAZ,EAAgBC,KAAK,GAAG,IAAxB,EAA8B;AAAA,SADzCC,KACyC,GADjC,EACiC;;AACvC,QAAI,CAAC,KAAKC,OAAL,CAAaH,QAAb,CAAL,EAA6B;AAC3B,YAAM,IAAII,KAAJ,CAAU,0CAAV,CAAN;AACD;;AACD,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaF,QAAb;AACD;;AAEDK,EAAAA,GAAG,CAACC,OAAD,EAAU;AACX,QAAI,CAAC,KAAKH,OAAL,CAAa,CAACG,OAAD,CAAb,CAAL,EAA8B;AAC5B,YAAM,IAAIF,KAAJ,CAAU,wBAAV,CAAN;AACD;;AACD,SAAKF,KAAL,CAAWK,IAAX,CAAgBD,OAAhB;AACD;;AAEDE,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKN,KAAL,CAAWO,MAAf,EAAuB;AACrB,YAAMH,OAAO,GAAG,KAAKJ,KAAL,CAAWQ,KAAX,EAAhB;AACAJ,MAAAA,OAAO,CAACK,KAAR,CAAcL,OAAO,CAACM,IAAtB,EAA6BC,MAAD,IAAY;AACtCP,QAAAA,OAAO,CAACQ,QAAR,CAAiBD,MAAjB;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,MAAM,CAACC,IAAP,CAAYZ,OAAZ,CAAvB;AACAa,QAAAA,UAAU,CAAC,MAAM;AACf,eAAKX,IAAL;AACD,SAFS,EAEP,KAAKP,KAFE,CAAV;AAGD,OAND;AAOD;AACF;;AAEDE,EAAAA,OAAO,CAACH,QAAD,EAAW;AAChB,WAAO,IAAP,CADgB,CAEhB;AACD;;AAjCsB","sourcesContent":["import { Chapter } from \"./Chapter\";\n\nexport class LinearStory {\n  story = [];\n  constructor(chapters = [], delay = 1000) {\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n    this.delay = delay;\n    this.story = chapters;\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a Chapters\");\n    }\n    this.story.push(chapter);\n  }\n\n  play() {\n    if (this.story.length) {\n      const chapter = this.story.shift();\n      chapter.start(chapter.data, (result) => {\n        chapter.complete(result);\n        console.log(\"clapter\", Object.keys(chapter));\n        setTimeout(() => {\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return true;\n    //return chapters.every((chapter) => chapter instanceof Chapter);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}