{"ast":null,"code":"import { Chapter } from \"./Chapter\";\nexport class LinearStory {\n  constructor(chapters = [], delay = 1000) {\n    this.story = [];\n\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n\n    this.delay = delay;\n    this.story = chapters;\n    console.log(\"this.story\", this.story);\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a of Chapters\");\n    }\n\n    this.story.push(chapter);\n    console.log(\"this.story\", this.story);\n  }\n\n  play() {\n    if (this.story.length) {\n      const chapter = this.story.unshift();\n      chapter.start(chapter.data, result => {\n        chapter.complete(result);\n        setTimeout(() => {\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return chapters.every(chapter => chapter instanceof Chapter);\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/classes/LinearStory.js"],"names":["Chapter","LinearStory","constructor","chapters","delay","story","isValid","Error","console","log","add","chapter","push","play","length","unshift","start","data","result","complete","setTimeout","every"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,WAAN,CAAkB;AAEvBC,EAAAA,WAAW,CAACC,QAAQ,GAAG,EAAZ,EAAgBC,KAAK,GAAG,IAAxB,EAA8B;AAAA,SADzCC,KACyC,GADjC,EACiC;;AACvC,QAAI,CAAC,KAAKC,OAAL,CAAaH,QAAb,CAAL,EAA6B;AAC3B,YAAM,IAAII,KAAJ,CAAU,0CAAV,CAAN;AACD;;AACD,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaF,QAAb;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAKJ,KAA/B;AACD;;AAEDK,EAAAA,GAAG,CAACC,OAAD,EAAU;AACX,QAAI,CAAC,KAAKL,OAAL,CAAa,CAACK,OAAD,CAAb,CAAL,EAA8B;AAC5B,YAAM,IAAIJ,KAAJ,CAAU,2BAAV,CAAN;AACD;;AACD,SAAKF,KAAL,CAAWO,IAAX,CAAgBD,OAAhB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAKJ,KAA/B;AACD;;AAEDQ,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKR,KAAL,CAAWS,MAAf,EAAuB;AACrB,YAAMH,OAAO,GAAG,KAAKN,KAAL,CAAWU,OAAX,EAAhB;AACAJ,MAAAA,OAAO,CAACK,KAAR,CAAcL,OAAO,CAACM,IAAtB,EAA6BC,MAAD,IAAY;AACtCP,QAAAA,OAAO,CAACQ,QAAR,CAAiBD,MAAjB;AACAE,QAAAA,UAAU,CAAC,MAAM;AACf,eAAKP,IAAL;AACD,SAFS,EAEP,KAAKT,KAFE,CAAV;AAGD,OALD;AAMD;AACF;;AAEDE,EAAAA,OAAO,CAACH,QAAD,EAAW;AAChB,WAAOA,QAAQ,CAACkB,KAAT,CAAgBV,OAAD,IAAaA,OAAO,YAAYX,OAA/C,CAAP;AACD;;AAjCsB","sourcesContent":["import { Chapter } from \"./Chapter\";\n\nexport class LinearStory {\n  story = [];\n  constructor(chapters = [], delay = 1000) {\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n    this.delay = delay;\n    this.story = chapters;\n    console.log(\"this.story\", this.story);\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a of Chapters\");\n    }\n    this.story.push(chapter);\n    console.log(\"this.story\", this.story);\n  }\n\n  play() {\n    if (this.story.length) {\n      const chapter = this.story.unshift();\n      chapter.start(chapter.data, (result) => {\n        chapter.complete(result);\n        setTimeout(() => {\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return chapters.every((chapter) => chapter instanceof Chapter);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}