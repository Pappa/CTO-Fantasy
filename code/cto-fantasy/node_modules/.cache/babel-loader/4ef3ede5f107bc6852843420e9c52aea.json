{"ast":null,"code":"import Phaser from \"phaser\";\nimport { Dev, ProductOwner, ScrumMaster, Tester } from \"../classes/Employee\";\nimport { randomInt } from \"../utils/random\";\nimport * as theme from \"../theme\";\nimport { LinearFSM } from \"../classes/LinearFSM\";\nexport class MainScene extends Phaser.Scene {\n  constructor() {\n    super(\"MainScene\");\n  }\n\n  init() {\n    this.createStartingEmployees();\n    this.createStartingCandidates();\n    this.createLinearStory();\n    this.budget = randomInt(50000, 100000);\n    this.state = MainScene.START;\n    this.company = this.registry.get(\"company\");\n  } // executed once, after assets were loaded\n\n\n  create() {\n    console.log(this.team);\n    console.log(this.candidates);\n    console.log(this.budget);\n    this.office = this.add.image(400, 300, \"office\").setOrigin(0.5);\n    this.header = this.add.text(15, 550, this.company.name, theme.h1).setOrigin(0); // if (this.state === MainScene.START) {\n    //   this.scene.launch(\"TeamScene\", { team: this.team, onClose: () => {} });\n    // }\n\n    this.story.next();\n  }\n\n  update(time, delta) {}\n\n  createStartingEmployees() {\n    const teamSize = this.registry.get(\"settings\").startingTeamSize;\n    this.team = Array(teamSize).fill(null).map(() => new Dev());\n  }\n\n  createStartingCandidates() {\n    const arrayofType = (T, length) => Array(length).fill(null).map(() => new T());\n\n    const scrumMasters = arrayofType(ScrumMaster, randomInt(1, 2));\n    const testers = arrayofType(Tester, randomInt(1, 2));\n    const productOwners = arrayofType(ProductOwner, randomInt(1, 2));\n    const devs = arrayofType(Dev, randomInt(1, 2));\n    this.candidates = [scrumMasters, testers, productOwners, devs].flat();\n  }\n\n  createLinearStory() {\n    const states = [{\n      enter: (data, done) => {\n        this.scene.launch(\"TeamScene\", {\n          team: this.team,\n          onClose: () => {\n            this.scene.stop(\"TeamScene\");\n            done();\n          }\n        });\n      },\n      exit: () => {}\n    }, {\n      enter: (data, done) => {\n        this.scene.launch(\"HiringScene\", {\n          candidates: this.candidates,\n          onClose: () => {\n            this.scene.stop(\"HiringScene\");\n            done();\n          }\n        });\n      },\n      exit: () => {}\n    }, {\n      enter: (data, done) => {\n        this.scene.launch(\"SprintScene\", {\n          team: this.team,\n          events: [],\n          onClose: () => {\n            this.scene.stop(\"SprintScene\");\n            done();\n          }\n        });\n      },\n      exit: () => {}\n    }];\n    this.story = new LinearFSM(states);\n  }\n\n}\nMainScene.START = \"start\";","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/scenes/MainScene.js"],"names":["Phaser","Dev","ProductOwner","ScrumMaster","Tester","randomInt","theme","LinearFSM","MainScene","Scene","constructor","init","createStartingEmployees","createStartingCandidates","createLinearStory","budget","state","START","company","registry","get","create","console","log","team","candidates","office","add","image","setOrigin","header","text","name","h1","story","next","update","time","delta","teamSize","startingTeamSize","Array","fill","map","arrayofType","T","length","scrumMasters","testers","productOwners","devs","flat","states","enter","data","done","scene","launch","onClose","stop","exit","events"],"mappings":"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","sourcesContent":["import Phaser from \"phaser\";\nimport { Dev, ProductOwner, ScrumMaster, Tester } from \"../classes/Employee\";\nimport { randomInt } from \"../utils/random\";\nimport * as theme from \"../theme\";\nimport { LinearFSM } from \"../classes/LinearFSM\";\n\nexport class MainScene extends Phaser.Scene {\n  constructor() {\n    super(\"MainScene\");\n  }\n\n  init() {\n    this.createStartingEmployees();\n    this.createStartingCandidates();\n    this.createLinearStory();\n    this.budget = randomInt(50000, 100000);\n    this.state = MainScene.START;\n    this.company = this.registry.get(\"company\");\n  }\n\n  // executed once, after assets were loaded\n  create() {\n    console.log(this.team);\n    console.log(this.candidates);\n    console.log(this.budget);\n\n    this.office = this.add.image(400, 300, \"office\").setOrigin(0.5);\n\n    this.header = this.add\n      .text(15, 550, this.company.name, theme.h1)\n      .setOrigin(0);\n\n    // if (this.state === MainScene.START) {\n    //   this.scene.launch(\"TeamScene\", { team: this.team, onClose: () => {} });\n    // }\n    this.story.next();\n  }\n\n  update(time, delta) {}\n\n  createStartingEmployees() {\n    const teamSize = this.registry.get(\"settings\").startingTeamSize;\n    this.team = Array(teamSize)\n      .fill(null)\n      .map(() => new Dev());\n  }\n\n  createStartingCandidates() {\n    const arrayofType = (T, length) =>\n      Array(length)\n        .fill(null)\n        .map(() => new T());\n    const scrumMasters = arrayofType(ScrumMaster, randomInt(1, 2));\n    const testers = arrayofType(Tester, randomInt(1, 2));\n    const productOwners = arrayofType(ProductOwner, randomInt(1, 2));\n    const devs = arrayofType(Dev, randomInt(1, 2));\n    this.candidates = [scrumMasters, testers, productOwners, devs].flat();\n  }\n\n  createLinearStory() {\n    const states = [\n      {\n        enter: (data, done) => {\n          this.scene.launch(\"TeamScene\", {\n            team: this.team,\n            onClose: () => {\n              this.scene.stop(\"TeamScene\");\n              done();\n            },\n          });\n        },\n        exit: () => {},\n      },\n      {\n        enter: (data, done) => {\n          this.scene.launch(\"HiringScene\", {\n            candidates: this.candidates,\n            onClose: () => {\n              this.scene.stop(\"HiringScene\");\n              done();\n            },\n          });\n        },\n        exit: () => {},\n      },\n      {\n        enter: (data, done) => {\n          this.scene.launch(\"SprintScene\", {\n            team: this.team,\n            events: [],\n            onClose: () => {\n              this.scene.stop(\"SprintScene\");\n              done();\n            },\n          });\n        },\n        exit: () => {},\n      },\n    ];\n    this.story = new LinearFSM(states);\n  }\n}\n\nMainScene.START = \"start\";\n"]},"metadata":{},"sourceType":"module"}