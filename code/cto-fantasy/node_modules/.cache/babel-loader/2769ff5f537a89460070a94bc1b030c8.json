{"ast":null,"code":"import { State } from \"./State\";\nexport class LinearFSM {\n  constructor(states = [], delay = 1000) {\n    this.queue = [];\n    this.currentState = null;\n\n    if (states.some(state => !this.isValid(state))) {\n      throw new Error(\"LinearFSM expects an array of States\");\n    }\n\n    this.delay = delay;\n    this.queue = states;\n  }\n\n  add(state) {\n    if (!this.isValid(state)) {\n      throw new Error(\"add expects a State\");\n    }\n\n    this.queue.push(state);\n  }\n\n  play() {\n    if (this.queue.length) {\n      this.currentState = this.queue[0];\n\n      if (this.currentState.delay) {\n        setTimeout(() => {\n          this.currentState.enter();\n        }, this.currentState.delay);\n      } else {\n        this.currentState.enter();\n      }\n    }\n  }\n\n  next() {\n    this.currentState.exit();\n    this.queue.shift();\n  }\n\n  isValid(state) {\n    return state instanceof State;\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/classes/LinearFSM.js"],"names":["State","LinearFSM","constructor","states","delay","queue","currentState","some","state","isValid","Error","add","push","play","length","setTimeout","enter","next","exit","shift"],"mappings":"AAAA,SAASA,KAAT,QAAsB,SAAtB;AAEA,OAAO,MAAMC,SAAN,CAAgB;AAGrBC,EAAAA,WAAW,CAACC,MAAM,GAAG,EAAV,EAAcC,KAAK,GAAG,IAAtB,EAA4B;AAAA,SAFvCC,KAEuC,GAF/B,EAE+B;AAAA,SADvCC,YACuC,GADxB,IACwB;;AACrC,QAAIH,MAAM,CAACI,IAAP,CAAaC,KAAD,IAAW,CAAC,KAAKC,OAAL,CAAaD,KAAb,CAAxB,CAAJ,EAAkD;AAChD,YAAM,IAAIE,KAAJ,CAAU,sCAAV,CAAN;AACD;;AACD,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaF,MAAb;AACD;;AAEDQ,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,QAAI,CAAC,KAAKC,OAAL,CAAaD,KAAb,CAAL,EAA0B;AACxB,YAAM,IAAIE,KAAJ,CAAU,qBAAV,CAAN;AACD;;AACD,SAAKL,KAAL,CAAWO,IAAX,CAAgBJ,KAAhB;AACD;;AAEDK,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKR,KAAL,CAAWS,MAAf,EAAuB;AACrB,WAAKR,YAAL,GAAoB,KAAKD,KAAL,CAAW,CAAX,CAApB;;AACA,UAAI,KAAKC,YAAL,CAAkBF,KAAtB,EAA6B;AAC3BW,QAAAA,UAAU,CAAC,MAAM;AACf,eAAKT,YAAL,CAAkBU,KAAlB;AACD,SAFS,EAEP,KAAKV,YAAL,CAAkBF,KAFX,CAAV;AAGD,OAJD,MAIO;AACL,aAAKE,YAAL,CAAkBU,KAAlB;AACD;AACF;AACF;;AAEDC,EAAAA,IAAI,GAAG;AACL,SAAKX,YAAL,CAAkBY,IAAlB;AACA,SAAKb,KAAL,CAAWc,KAAX;AACD;;AAEDV,EAAAA,OAAO,CAACD,KAAD,EAAQ;AACb,WAAOA,KAAK,YAAYR,KAAxB;AACD;;AAtCoB","sourcesContent":["import { State } from \"./State\";\n\nexport class LinearFSM {\n  queue = [];\n  currentState = null;\n  constructor(states = [], delay = 1000) {\n    if (states.some((state) => !this.isValid(state))) {\n      throw new Error(\"LinearFSM expects an array of States\");\n    }\n    this.delay = delay;\n    this.queue = states;\n  }\n\n  add(state) {\n    if (!this.isValid(state)) {\n      throw new Error(\"add expects a State\");\n    }\n    this.queue.push(state);\n  }\n\n  play() {\n    if (this.queue.length) {\n      this.currentState = this.queue[0];\n      if (this.currentState.delay) {\n        setTimeout(() => {\n          this.currentState.enter();\n        }, this.currentState.delay);\n      } else {\n        this.currentState.enter();\n      }\n    }\n  }\n\n  next() {\n    this.currentState.exit();\n    this.queue.shift();\n  }\n\n  isValid(state) {\n    return state instanceof State;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}