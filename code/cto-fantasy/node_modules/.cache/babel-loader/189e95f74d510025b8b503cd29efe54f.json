{"ast":null,"code":"export class LinearStory {\n  constructor(chapters = [], delay = 1000) {\n    this.story = [];\n\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n\n    this.delay = delay;\n    this.story = chapters;\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a Chapters\");\n    }\n\n    this.story.push(chapter);\n  }\n\n  play() {\n    console.log(\"play\", this.story.length);\n\n    if (this.story.length) {\n      const chapter = this.story.shift();\n      chapter.start(chapter.data, result => {\n        !!chapter.complete && chapter.complete(result);\n        setTimeout(() => {\n          console.log(\"setTimeout\");\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return true; //return chapters.every((chapter) => chapter instanceof Chapter);\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/classes/LinearStory.js"],"names":["LinearStory","constructor","chapters","delay","story","isValid","Error","add","chapter","push","play","console","log","length","shift","start","data","result","complete","setTimeout"],"mappings":"AAAA,OAAO,MAAMA,WAAN,CAAkB;AAEvBC,EAAAA,WAAW,CAACC,QAAQ,GAAG,EAAZ,EAAgBC,KAAK,GAAG,IAAxB,EAA8B;AAAA,SADzCC,KACyC,GADjC,EACiC;;AACvC,QAAI,CAAC,KAAKC,OAAL,CAAaH,QAAb,CAAL,EAA6B;AAC3B,YAAM,IAAII,KAAJ,CAAU,0CAAV,CAAN;AACD;;AACD,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaF,QAAb;AACD;;AAEDK,EAAAA,GAAG,CAACC,OAAD,EAAU;AACX,QAAI,CAAC,KAAKH,OAAL,CAAa,CAACG,OAAD,CAAb,CAAL,EAA8B;AAC5B,YAAM,IAAIF,KAAJ,CAAU,wBAAV,CAAN;AACD;;AACD,SAAKF,KAAL,CAAWK,IAAX,CAAgBD,OAAhB;AACD;;AAEDE,EAAAA,IAAI,GAAG;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB,KAAKR,KAAL,CAAWS,MAA/B;;AACA,QAAI,KAAKT,KAAL,CAAWS,MAAf,EAAuB;AACrB,YAAML,OAAO,GAAG,KAAKJ,KAAL,CAAWU,KAAX,EAAhB;AACAN,MAAAA,OAAO,CAACO,KAAR,CAAcP,OAAO,CAACQ,IAAtB,EAA6BC,MAAD,IAAY;AACtC,SAAC,CAACT,OAAO,CAACU,QAAV,IAAsBV,OAAO,CAACU,QAAR,CAAiBD,MAAjB,CAAtB;AACAE,QAAAA,UAAU,CAAC,MAAM;AACfR,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,eAAKF,IAAL;AACD,SAHS,EAGP,KAAKP,KAHE,CAAV;AAID,OAND;AAOD;AACF;;AAEDE,EAAAA,OAAO,CAACH,QAAD,EAAW;AAChB,WAAO,IAAP,CADgB,CAEhB;AACD;;AAlCsB","sourcesContent":["export class LinearStory {\n  story = [];\n  constructor(chapters = [], delay = 1000) {\n    if (!this.isValid(chapters)) {\n      throw new Error(\"LinearStory expects an array of Chapters\");\n    }\n    this.delay = delay;\n    this.story = chapters;\n  }\n\n  add(chapter) {\n    if (!this.isValid([chapter])) {\n      throw new Error(\"add expects a Chapters\");\n    }\n    this.story.push(chapter);\n  }\n\n  play() {\n    console.log(\"play\", this.story.length);\n    if (this.story.length) {\n      const chapter = this.story.shift();\n      chapter.start(chapter.data, (result) => {\n        !!chapter.complete && chapter.complete(result);\n        setTimeout(() => {\n          console.log(\"setTimeout\");\n          this.play();\n        }, this.delay);\n      });\n    }\n  }\n\n  isValid(chapters) {\n    return true;\n    //return chapters.every((chapter) => chapter instanceof Chapter);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}