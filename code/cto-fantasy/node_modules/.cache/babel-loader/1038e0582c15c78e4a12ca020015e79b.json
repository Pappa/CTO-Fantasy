{"ast":null,"code":"import { State } from \"./State\";\nexport class LinearFSM {\n  constructor(states = [], delay = 1000) {\n    this.queue = [];\n\n    if (states.some(state => !this.isValid(state))) {\n      throw new Error(\"LinearFSM expects an array of States\");\n    }\n\n    this.delay = delay;\n    this.queue = states;\n  }\n\n  add(state) {\n    if (!this.isValid(state)) {\n      throw new Error(\"add expects a State\");\n    }\n\n    this.queue.push(state);\n  }\n\n  play() {\n    if (this.queue.length) {\n      const state = this.queue[0];\n\n      if (state.delay) {\n        setTimeout(() => {\n          state.enter();\n        }, state.delay);\n      } else {\n        state.enter();\n      }\n    }\n  }\n\n  next() {}\n\n  isValid(state) {\n    return state instanceof State;\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/classes/LinearFSM.js"],"names":["State","LinearFSM","constructor","states","delay","queue","some","state","isValid","Error","add","push","play","length","setTimeout","enter","next"],"mappings":"AAAA,SAASA,KAAT,QAAsB,SAAtB;AAEA,OAAO,MAAMC,SAAN,CAAgB;AAErBC,EAAAA,WAAW,CAACC,MAAM,GAAG,EAAV,EAAcC,KAAK,GAAG,IAAtB,EAA4B;AAAA,SADvCC,KACuC,GAD/B,EAC+B;;AACrC,QAAIF,MAAM,CAACG,IAAP,CAAaC,KAAD,IAAW,CAAC,KAAKC,OAAL,CAAaD,KAAb,CAAxB,CAAJ,EAAkD;AAChD,YAAM,IAAIE,KAAJ,CAAU,sCAAV,CAAN;AACD;;AACD,SAAKL,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaF,MAAb;AACD;;AAEDO,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,QAAI,CAAC,KAAKC,OAAL,CAAaD,KAAb,CAAL,EAA0B;AACxB,YAAM,IAAIE,KAAJ,CAAU,qBAAV,CAAN;AACD;;AACD,SAAKJ,KAAL,CAAWM,IAAX,CAAgBJ,KAAhB;AACD;;AAEDK,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKP,KAAL,CAAWQ,MAAf,EAAuB;AACrB,YAAMN,KAAK,GAAG,KAAKF,KAAL,CAAW,CAAX,CAAd;;AACA,UAAIE,KAAK,CAACH,KAAV,EAAiB;AACfU,QAAAA,UAAU,CAAC,MAAM;AACfP,UAAAA,KAAK,CAACQ,KAAN;AACD,SAFS,EAEPR,KAAK,CAACH,KAFC,CAAV;AAGD,OAJD,MAIO;AACLG,QAAAA,KAAK,CAACQ,KAAN;AACD;AACF;AACF;;AAEDC,EAAAA,IAAI,GAAG,CAAE;;AAETR,EAAAA,OAAO,CAACD,KAAD,EAAQ;AACb,WAAOA,KAAK,YAAYP,KAAxB;AACD;;AAlCoB","sourcesContent":["import { State } from \"./State\";\n\nexport class LinearFSM {\n  queue = [];\n  constructor(states = [], delay = 1000) {\n    if (states.some((state) => !this.isValid(state))) {\n      throw new Error(\"LinearFSM expects an array of States\");\n    }\n    this.delay = delay;\n    this.queue = states;\n  }\n\n  add(state) {\n    if (!this.isValid(state)) {\n      throw new Error(\"add expects a State\");\n    }\n    this.queue.push(state);\n  }\n\n  play() {\n    if (this.queue.length) {\n      const state = this.queue[0];\n      if (state.delay) {\n        setTimeout(() => {\n          state.enter();\n        }, state.delay);\n      } else {\n        state.enter();\n      }\n    }\n  }\n\n  next() {}\n\n  isValid(state) {\n    return state instanceof State;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}