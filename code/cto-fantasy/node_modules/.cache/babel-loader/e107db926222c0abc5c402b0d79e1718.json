{"ast":null,"code":"import Phaser from \"phaser\";\nimport { LinearFSM } from \"../classes/states/LinearFSM\";\nimport { SprintEventState } from \"../classes/states/sprint/SprintEvent\";\nimport * as theme from \"../theme\";\nimport { randomInt } from \"../utils/random\";\nexport class SprintScene extends Phaser.Scene {\n  constructor() {\n    super(\"SprintScene\");\n  }\n\n  init() {}\n\n  preload() {}\n\n  create({\n    team,\n    events = [],\n    onClose\n  }) {\n    this.team = team;\n    this.events = events;\n    this.onClose = onClose;\n    this.updateSprintNumber();\n    this.createComponents();\n  }\n\n  update(time, delta) {\n    if (!this.events.length) {//this.onClose();\n    }\n  }\n\n  updateSprintNumber() {\n    this.sprintNumber = this.registry.inc(\"sprintNumber\").get(\"sprintNumber\");\n    console.log(\"this.sprintNumber\", this.sprintNumber);\n  }\n\n  createComponents() {\n    this.header = this.add.text(400, 15, `Sprint ${this.sprintNumber}`, theme.h1).setOrigin(0.5, 0);\n    this.eventCard = this.add.dom(400, 300).createFromCache(\"event\").setOrigin(0.5);\n    /*.setVisible(false)*/\n  }\n\n  createEvents() {\n    this.fsm = new LinearFSM();\n    this.events = Array(randomInt(1, 3)).fill(null).map(() => ({\n      text: \"Do you want to do A or B?\",\n      A: () => {},\n      B: () => {}\n    })).map(ev => new SprintEventState(this.fsm, ev));\n    this.fsm.add(this.events);\n  }\n\n  displayEvent(event) {\n    this.eventCard.getChildByID(\"description\").textContent = event.text;\n  }\n\n}","map":{"version":3,"sources":["/Users/robhill/Projects/Pappa/cto-fantasy/src/modules/game/cto-fantasy/scenes/SprintScene.js"],"names":["Phaser","LinearFSM","SprintEventState","theme","randomInt","SprintScene","Scene","constructor","init","preload","create","team","events","onClose","updateSprintNumber","createComponents","update","time","delta","length","sprintNumber","registry","inc","get","console","log","header","add","text","h1","setOrigin","eventCard","dom","createFromCache","createEvents","fsm","Array","fill","map","A","B","ev","displayEvent","event","getChildByID","textContent"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,SAASC,gBAAT,QAAiC,sCAAjC;AACA,OAAO,KAAKC,KAAZ,MAAuB,UAAvB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,OAAO,MAAMC,WAAN,SAA0BL,MAAM,CAACM,KAAjC,CAAuC;AAC5CC,EAAAA,WAAW,GAAG;AACZ,UAAM,aAAN;AACD;;AAEDC,EAAAA,IAAI,GAAG,CAAE;;AAETC,EAAAA,OAAO,GAAG,CAAE;;AAEZC,EAAAA,MAAM,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAM,GAAG,EAAjB;AAAqBC,IAAAA;AAArB,GAAD,EAAiC;AACrC,SAAKF,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,kBAAL;AACA,SAAKC,gBAAL;AACD;;AAEDC,EAAAA,MAAM,CAACC,IAAD,EAAOC,KAAP,EAAc;AAClB,QAAI,CAAC,KAAKN,MAAL,CAAYO,MAAjB,EAAyB,CACvB;AACD;AACF;;AAEDL,EAAAA,kBAAkB,GAAG;AACnB,SAAKM,YAAL,GAAoB,KAAKC,QAAL,CAAcC,GAAd,CAAkB,cAAlB,EAAkCC,GAAlC,CAAsC,cAAtC,CAApB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC,KAAKL,YAAtC;AACD;;AAEDL,EAAAA,gBAAgB,GAAG;AACjB,SAAKW,MAAL,GAAc,KAAKC,GAAL,CACXC,IADW,CACN,GADM,EACD,EADC,EACI,UAAS,KAAKR,YAAa,EAD/B,EACkCjB,KAAK,CAAC0B,EADxC,EAEXC,SAFW,CAED,GAFC,EAEI,CAFJ,CAAd;AAGA,SAAKC,SAAL,GAAiB,KAAKJ,GAAL,CACdK,GADc,CACV,GADU,EACL,GADK,EAEdC,eAFc,CAEE,OAFF,EAGdH,SAHc,CAGJ,GAHI,CAAjB;AAIA;AACD;;AAEDI,EAAAA,YAAY,GAAG;AACb,SAAKC,GAAL,GAAW,IAAIlC,SAAJ,EAAX;AACA,SAAKW,MAAL,GAAcwB,KAAK,CAAChC,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAV,CAAL,CACXiC,IADW,CACN,IADM,EAEXC,GAFW,CAEP,OAAO;AACVV,MAAAA,IAAI,EAAE,2BADI;AAEVW,MAAAA,CAAC,EAAE,MAAM,CAAE,CAFD;AAGVC,MAAAA,CAAC,EAAE,MAAM,CAAE;AAHD,KAAP,CAFO,EAOXF,GAPW,CAONG,EAAD,IAAQ,IAAIvC,gBAAJ,CAAqB,KAAKiC,GAA1B,EAA+BM,EAA/B,CAPD,CAAd;AAQA,SAAKN,GAAL,CAASR,GAAT,CAAa,KAAKf,MAAlB;AACD;;AAED8B,EAAAA,YAAY,CAACC,KAAD,EAAQ;AAClB,SAAKZ,SAAL,CAAea,YAAf,CAA4B,aAA5B,EAA2CC,WAA3C,GAAyDF,KAAK,CAACf,IAA/D;AACD;;AAtD2C","sourcesContent":["import Phaser from \"phaser\";\nimport { LinearFSM } from \"../classes/states/LinearFSM\";\nimport { SprintEventState } from \"../classes/states/sprint/SprintEvent\";\nimport * as theme from \"../theme\";\nimport { randomInt } from \"../utils/random\";\n\nexport class SprintScene extends Phaser.Scene {\n  constructor() {\n    super(\"SprintScene\");\n  }\n\n  init() {}\n\n  preload() {}\n\n  create({ team, events = [], onClose }) {\n    this.team = team;\n    this.events = events;\n    this.onClose = onClose;\n    this.updateSprintNumber();\n    this.createComponents();\n  }\n\n  update(time, delta) {\n    if (!this.events.length) {\n      //this.onClose();\n    }\n  }\n\n  updateSprintNumber() {\n    this.sprintNumber = this.registry.inc(\"sprintNumber\").get(\"sprintNumber\");\n    console.log(\"this.sprintNumber\", this.sprintNumber);\n  }\n\n  createComponents() {\n    this.header = this.add\n      .text(400, 15, `Sprint ${this.sprintNumber}`, theme.h1)\n      .setOrigin(0.5, 0);\n    this.eventCard = this.add\n      .dom(400, 300)\n      .createFromCache(\"event\")\n      .setOrigin(0.5);\n    /*.setVisible(false)*/\n  }\n\n  createEvents() {\n    this.fsm = new LinearFSM();\n    this.events = Array(randomInt(1, 3))\n      .fill(null)\n      .map(() => ({\n        text: \"Do you want to do A or B?\",\n        A: () => {},\n        B: () => {},\n      }))\n      .map((ev) => new SprintEventState(this.fsm, ev));\n    this.fsm.add(this.events);\n  }\n\n  displayEvent(event) {\n    this.eventCard.getChildByID(\"description\").textContent = event.text;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}